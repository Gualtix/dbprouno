{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\diego\\\\OneDrive\\\\Desktop\\\\ayd2-aydisco-g3\\\\FrontEnd\\\\development\\\\src\\\\Components\\\\Album\\\\CreateAlbum.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport { withRouter, Link } from \"react-router-dom\";\nimport Box from \"@material-ui/core/Box\";\nimport axios from \"axios\";\nimport { Form, FormGroup } from \"reactstrap\";\nimport TextField from \"@material-ui/core/TextField\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { Button } from \"@rmwc/button\";\nimport { CircularProgress } from \"@rmwc/circular-progress\";\nimport OutlinedInput from \"@material-ui/core/OutlinedInput\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport Visibility from \"@material-ui/icons/Visibility\";\nimport VisibilityOff from \"@material-ui/icons/VisibilityOff\";\nimport clsx from \"clsx\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport \"date-fns\";\nimport Collapse from \"@material-ui/core/Collapse\";\nimport \"@rmwc/typography/styles\";\nimport Titulo from \"../Props/Titulo\";\nimport { toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport CommentIcon from '@material-ui/icons/Comment';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar AWS = require('aws-sdk');\n\nconst s3Bucket = 'proyecto-vacas';\nconst reg = 'us-east-2';\nAWS.config.update({\n  accessKeyId: 'AKIATDA2FT6HWFMCLFID',\n  secretAccessKey: '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'\n});\nconst myBucket = new AWS.S3({\n  params: {\n    Bucket: s3Bucket\n  },\n  region: reg\n});\n\nconst serversAddr = require(\"../serversAddr\");\n\nconst shajs = require('sha.js');\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: \"flex\",\n    flexWrap: \"wrap\"\n  },\n  colorCard: {\n    backgroundColor: \"#F7F7EF\",\n    borderColor: \"#ffffff\"\n  },\n  colorCampo: {\n    backgroundColor: \"#FFFFFF\",\n    width: \"35ch\"\n  },\n  margin: {\n    margin: theme.spacing(1),\n    width: \"100%\",\n    justifyContent: \"center\"\n  },\n  withoutLabel: {\n    marginTop: theme.spacing(3)\n  },\n  textField: {\n    width: \"75ch\",\n    backgroundColor: \"#FFFFFF\"\n  },\n  tamAlert: {\n    width: \"200px\"\n  },\n  centrarContenido: {\n    textAlign: \"center\"\n  },\n  registrarse: {\n    textAlign: \"right\",\n    fontSize: 12\n  },\n  root2: {\n    width: '100%',\n    maxWidth: 360,\n    backgroundColor: theme.palette.background.paper\n  }\n}));\n\nfunction CreateAlbum() {\n  _s();\n\n  const classes = useStyles();\n  const [valuesAlbum, setValues] = useState({\n    \"nombre\": \"\",\n    \"nickname\": \"\",\n    \"lista\": [],\n    \"imagen\": \"\"\n  });\n  const [canciones, setCanciones] = useState([{\n    \"idcancion\": -1,\n    \"nombre\": \"name\",\n    \"extension\": \"mp3\",\n    \"FechaUp\": \"01/01/2020\",\n    \"Link\": \"...\"\n  }]);\n  const [progress, setProgress] = useState(0);\n  const [selectedFile, setSelectedFile] = useState(null);\n\n  const handleFileInput = e => {\n    setSelectedFile(e.target.files[0]);\n  };\n\n  const uploadFile = file => {\n    const params = {\n      ACL: 'public-read',\n      Body: file,\n      Bucket: s3Bucket,\n      ContentType: \"image\",\n      Key: file.name\n    };\n    myBucket.putObject(params).on('httpUploadProgress', evt => {\n      setProgress(Math.round(evt.loaded / evt.total * 100));\n    }).send(err => {\n      if (err) console.log(err);\n    });\n  };\n\n  const handleChange = prop => event => {\n    setValues({ ...valuesAlbum,\n      [prop]: event.target.value\n    });\n  };\n\n  const [checked, setChecked] = React.useState([0]);\n\n  const handleToggle = value => () => {\n    const currentIndex = checked.indexOf(value);\n    const newChecked = [...checked];\n\n    if (currentIndex === -1) {\n      newChecked.push(value);\n    } else {\n      newChecked.splice(currentIndex, 1);\n    }\n\n    setChecked(newChecked);\n  };\n\n  const submitData = async event => {\n    event.preventDefault();\n\n    if (valuesAlbum.nombre === \"\") {\n      toast.error(\"El campo Nombre del album es obligatorio\", {\n        position: toast.POSITION.TOP_RIGHT,\n        autoClose: 5000\n      });\n    } else {\n      if (selectedFile.name != null) {\n        valuesAlbum.imagen = \"https://proyecto-vacas.s3.us-east-2.amazonaws.com/\" + selectedFile.name;\n      }\n\n      setValues({ ...valuesAlbum,\n        \"lista\": checked\n      });\n      valuesAlbum.lista = checked;\n      console.log(valuesAlbum);\n      event.preventDefault();\n    }\n    /*axios\r\n     .post(\r\n       \"http://\" +\r\n       serversAddr.backend.host +\r\n       \":\" +\r\n       serversAddr.backend.port +\r\n       \"/middleware\",\r\n       {\r\n         peticion: \"/createAlbum\",\r\n         server: 4,\r\n         data:\r\n           valuesAlbum\r\n       }\r\n     )\r\n     .then((response) => {\r\n       console.log(response);\r\n     });\r\n    } */\n\n  };\n\n  const updateData = async event => {\n    event.preventDefault();\n    axios.post(\"http://\" + serversAddr.backend.host + \":\" + serversAddr.backend.port + \"/middleware\", {\n      peticion: \"/propscanciones\",\n      server: 2,\n      data: {\n        idcancion: 3,\n        nombre: 'Fuba',\n        extension: '.mp3',\n        fechaup: '2021-11-12T00:00:00.000Z',\n        link: 'http://facebook.com'\n      }\n    }).then(response => {\n      console.log(response); //setCanciones(response.data);\n    });\n  };\n\n  useEffect(() => {\n    console.log('MOUNTED'); //Actualizar los datos de localstorage\n\n    valuesAlbum.nickname = localStorage.getItem(\"username\"); //;--Debe ser de localstorage\n\n    return () => {\n      //---AQUI EL CODIGO QUE SE EJECUTA CUANDO SE DESMONTE EL COMPONENTE\n      console.log('UNMOUNTED');\n    };\n  }, [canciones]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Titulo, {\n      nombre: \"Crear Album\",\n      etiqueta: \"register-title\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      display: \"flex\",\n      justifyContent: \"center\",\n      m: 1,\n      p: 1,\n      bgcolor: \"#FFFFFF\",\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        variant: \"outlined\",\n        children: /*#__PURE__*/_jsxDEV(CardContent, {\n          className: classes.colorCard,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            align: \"center\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              align: \"center\",\n              alt: \"imagen crear album\",\n              src: \"/music.png\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            display: \"flex\",\n            justifyContent: \"center\",\n            p: 1,\n            flexGrow: 1,\n            bgcolor: \"#F7F7EF\",\n            children: /*#__PURE__*/_jsxDEV(Form, {\n              children: /*#__PURE__*/_jsxDEV(FormGroup, {\n                children: [/*#__PURE__*/_jsxDEV(Box, {\n                  display: \"flex\",\n                  justifyContent: \"center\",\n                  p: 1,\n                  flexGrow: 1,\n                  bgcolor: \"#F7F7EF\",\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    class: \"form-group\",\n                    type: \"file\",\n                    name: \"UploadAudio\",\n                    accept: \"image/png, image/jpeg\",\n                    onChange: handleFileInput\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 248,\n                    columnNumber: 37\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 247,\n                  columnNumber: 35\n                }, this), /*#__PURE__*/_jsxDEV(Box, {\n                  children: /*#__PURE__*/_jsxDEV(TextField, {\n                    label: \"Nombre del album\",\n                    onChange: handleChange(\"nombre\"),\n                    required: true,\n                    id: \"outlined-required\",\n                    className: clsx(classes.margin, classes.textField),\n                    value: valuesAlbum.nombre,\n                    variant: \"outlined\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 251,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 250,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    display: \"flex\",\n                    justifyContent: \"center\",\n                    alignItems: \"center\"\n                  },\n                  children: /*#__PURE__*/_jsxDEV(List, {\n                    className: classes.root2,\n                    children: canciones.map((value, index) => {\n                      const labelId = `checkbox-list-label-${value}`;\n                      return /*#__PURE__*/_jsxDEV(ListItem, {\n                        values: value,\n                        role: undefined,\n                        dense: true,\n                        button: true,\n                        onClick: handleToggle(value),\n                        children: [/*#__PURE__*/_jsxDEV(ListItemIcon, {\n                          children: /*#__PURE__*/_jsxDEV(Checkbox, {\n                            edge: \"start\",\n                            checked: checked.indexOf(value) !== -1,\n                            tabIndex: -1,\n                            disableRipple: true,\n                            inputProps: {\n                              'aria-labelledby': labelId\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 273,\n                            columnNumber: 47\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 272,\n                          columnNumber: 45\n                        }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n                          id: labelId,\n                          primary: `${value.idcancion} - ${value.nombre}.${value.extension}`\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 281,\n                          columnNumber: 45\n                        }, this)]\n                      }, index, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 271,\n                        columnNumber: 43\n                      }, this);\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 266,\n                    columnNumber: 39\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 261,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: classes.centrarContenido,\n                  children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 288,\n                    columnNumber: 39\n                  }, this), /*#__PURE__*/_jsxDEV(Button, {\n                    style: {\n                      fontWeight: \"bold\"\n                    },\n                    label: \"Actualizar\",\n                    onClick: updateData\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 289,\n                    columnNumber: 39\n                  }, this), /*#__PURE__*/_jsxDEV(Button, {\n                    style: {\n                      fontWeight: \"bold\"\n                    },\n                    label: \"Crear album\",\n                    onClick: submitData\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 294,\n                    columnNumber: 39\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 287,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 246,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 226,\n    columnNumber: 9\n  }, this);\n}\n\n_s(CreateAlbum, \"56fqEwqRHIIWg4PLIb4OYDupHt4=\", false, function () {\n  return [useStyles];\n});\n\n_c = CreateAlbum;\nexport default CreateAlbum;\n\nvar _c;\n\n$RefreshReg$(_c, \"CreateAlbum\");","map":{"version":3,"sources":["C:/Users/diego/OneDrive/Desktop/ayd2-aydisco-g3/FrontEnd/development/src/Components/Album/CreateAlbum.js"],"names":["React","useEffect","useState","Card","CardContent","withRouter","Link","Box","axios","Form","FormGroup","TextField","makeStyles","Button","CircularProgress","OutlinedInput","InputLabel","InputAdornment","FormControl","Visibility","VisibilityOff","clsx","IconButton","Collapse","Titulo","toast","List","ListItem","ListItemIcon","ListItemSecondaryAction","ListItemText","Checkbox","CommentIcon","AWS","require","s3Bucket","reg","config","update","accessKeyId","secretAccessKey","myBucket","S3","params","Bucket","region","serversAddr","shajs","useStyles","theme","root","display","flexWrap","colorCard","backgroundColor","borderColor","colorCampo","width","margin","spacing","justifyContent","withoutLabel","marginTop","textField","tamAlert","centrarContenido","textAlign","registrarse","fontSize","root2","maxWidth","palette","background","paper","CreateAlbum","classes","valuesAlbum","setValues","canciones","setCanciones","progress","setProgress","selectedFile","setSelectedFile","handleFileInput","e","target","files","uploadFile","file","ACL","Body","ContentType","Key","name","putObject","on","evt","Math","round","loaded","total","send","err","console","log","handleChange","prop","event","value","checked","setChecked","handleToggle","currentIndex","indexOf","newChecked","push","splice","submitData","preventDefault","nombre","error","position","POSITION","TOP_RIGHT","autoClose","imagen","lista","updateData","post","backend","host","port","peticion","server","data","idcancion","extension","fechaup","link","then","response","nickname","localStorage","getItem","alignItems","map","index","labelId","undefined","fontWeight"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Card from \"@material-ui/core/Card\";\r\nimport CardContent from \"@material-ui/core/CardContent\";\r\nimport { withRouter, Link } from \"react-router-dom\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport axios from \"axios\";\r\nimport { Form, FormGroup } from \"reactstrap\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Button } from \"@rmwc/button\";\r\nimport { CircularProgress } from \"@rmwc/circular-progress\";\r\nimport OutlinedInput from \"@material-ui/core/OutlinedInput\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport Visibility from \"@material-ui/icons/Visibility\";\r\nimport VisibilityOff from \"@material-ui/icons/VisibilityOff\";\r\nimport clsx from \"clsx\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport \"date-fns\";\r\nimport Collapse from \"@material-ui/core/Collapse\";\r\nimport \"@rmwc/typography/styles\";\r\nimport Titulo from \"../Props/Titulo\";\r\nimport { toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport CommentIcon from '@material-ui/icons/Comment';\r\nvar AWS = require('aws-sdk');\r\n\r\nconst s3Bucket = 'proyecto-vacas';\r\nconst reg = 'us-east-2';\r\n\r\nAWS.config.update({\r\n  accessKeyId: 'AKIATDA2FT6HWFMCLFID',\r\n  secretAccessKey: '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'\r\n})\r\n\r\nconst myBucket = new AWS.S3({\r\n  params: {Bucket: s3Bucket},\r\n  region: reg\r\n})\r\n\r\nconst serversAddr = require(\"../serversAddr\");\r\nconst shajs = require('sha.js');\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n      display: \"flex\",\r\n      flexWrap: \"wrap\",\r\n    },\r\n    colorCard: {\r\n      backgroundColor: \"#F7F7EF\",\r\n      borderColor: \"#ffffff\",\r\n    },\r\n    colorCampo: {\r\n      backgroundColor: \"#FFFFFF\",\r\n      width: \"35ch\",\r\n    },\r\n    margin: {\r\n      margin: theme.spacing(1),\r\n      width: \"100%\",\r\n      justifyContent: \"center\",\r\n    },\r\n    withoutLabel: {\r\n      marginTop: theme.spacing(3),\r\n    },\r\n    textField: {\r\n      width: \"75ch\",\r\n      backgroundColor: \"#FFFFFF\",\r\n    },\r\n    tamAlert: {\r\n      width: \"200px\",\r\n    },\r\n    centrarContenido: {\r\n      textAlign: \"center\",\r\n    },\r\n    registrarse: {\r\n      textAlign: \"right\",\r\n      fontSize: 12,\r\n    },\r\n    root2: {\r\n      width: '100%',\r\n      maxWidth: 360,\r\n      backgroundColor: theme.palette.background.paper,\r\n    },\r\n  }));\r\n\r\nfunction CreateAlbum(){\r\n    const classes = useStyles();\r\n    const [valuesAlbum, setValues] = useState({\r\n      \"nombre\":\"\",\r\n      \"nickname\":\"\",\r\n      \"lista\": [],\r\n      \"imagen\": \"\"\r\n    });\r\n\r\n    const [canciones, setCanciones] = useState(\r\n      [\r\n        {\"idcancion\":-1,\"nombre\":\"name\",\"extension\":\"mp3\",\"FechaUp\":\"01/01/2020\",\"Link\":\"...\"},\r\n      ]\r\n    );\r\n\r\n    const [progress , setProgress] = useState(0);\r\n    const [selectedFile, setSelectedFile] = useState(null);\r\n\r\n    const handleFileInput = (e) => {\r\n      setSelectedFile(e.target.files[0]);\r\n    }\r\n\r\n    const uploadFile = (file) => {\r\n      const params = {\r\n          ACL: 'public-read',\r\n          Body: file,\r\n          Bucket: s3Bucket,\r\n          ContentType: \"image\",\r\n          Key: file.name\r\n      };\r\n  \r\n      myBucket.putObject(params).on('httpUploadProgress', (evt) => {\r\n              setProgress(Math.round((evt.loaded / evt.total) * 100))\r\n      }).send((err) => {\r\n          if (err) console.log(err)\r\n      })\r\n    }\r\n\r\n    const handleChange = (prop) => (event) => {\r\n      setValues({ ...valuesAlbum, [prop]: event.target.value });\r\n    };\r\n\r\n    const [checked, setChecked] = React.useState([0]);\r\n\r\n    const handleToggle = (value) => () => {\r\n      const currentIndex = checked.indexOf(value);\r\n      const newChecked = [...checked];\r\n\r\n      if (currentIndex === -1) {\r\n        newChecked.push(value);\r\n      } else {\r\n        newChecked.splice(currentIndex, 1);\r\n      }\r\n      setChecked(newChecked);\r\n    };\r\n    \r\n    const submitData = async (event) => {\r\n      event.preventDefault();\r\n      \r\n      if (valuesAlbum.nombre === \"\"){\r\n        toast.error(\"El campo Nombre del album es obligatorio\", {\r\n          position: toast.POSITION.TOP_RIGHT,\r\n          autoClose: 5000,\r\n        });\r\n      }else{\r\n        if(selectedFile.name != null){\r\n          valuesAlbum.imagen = \"https://proyecto-vacas.s3.us-east-2.amazonaws.com/\"+selectedFile.name;\r\n        }\r\n        setValues({ ...valuesAlbum, \"lista\": checked });\r\n        valuesAlbum.lista=checked;\r\n        console.log(valuesAlbum);\r\n        event.preventDefault();\r\n      }/*axios\r\n        .post(\r\n          \"http://\" +\r\n          serversAddr.backend.host +\r\n          \":\" +\r\n          serversAddr.backend.port +\r\n          \"/middleware\",\r\n          {\r\n            peticion: \"/createAlbum\",\r\n            server: 4,\r\n            data:\r\n              valuesAlbum\r\n          }\r\n        )\r\n        .then((response) => {\r\n          console.log(response);\r\n        });\r\n      } */\r\n    }\r\n\r\n    const updateData = async (event) => {\r\n      event.preventDefault();\r\n      axios\r\n        .post(\r\n            \"http://\" +\r\n            serversAddr.backend.host +\r\n            \":\" +\r\n            serversAddr.backend.port +\r\n            \"/middleware\",\r\n            {\r\n            peticion: \"/propscanciones\",\r\n            server: 2,\r\n            data: {\r\n                idcancion: 3,\r\n                nombre: 'Fuba',\r\n                extension: '.mp3',\r\n                fechaup: '2021-11-12T00:00:00.000Z',\r\n                link: 'http://facebook.com'\r\n            }\r\n            }\r\n        )\r\n        .then((response) => {\r\n            console.log(response)\r\n            //setCanciones(response.data);\r\n        });\r\n      \r\n    };\r\n\r\n    useEffect(() => {\r\n      console.log('MOUNTED');\r\n      //Actualizar los datos de localstorage\r\n      valuesAlbum.nickname=localStorage.getItem(\"username\"); //;--Debe ser de localstorage\r\n      return () => {\r\n        //---AQUI EL CODIGO QUE SE EJECUTA CUANDO SE DESMONTE EL COMPONENTE\r\n        console.log('UNMOUNTED');\r\n    };\r\n    },[canciones])\r\n    \r\n    \r\n    return (\r\n        <div>\r\n            <Titulo nombre=\"Crear Album\" etiqueta=\"register-title\" />\r\n            <Box display=\"flex\" justifyContent=\"center\" m={1} p={1} bgcolor=\"#FFFFFF\">\r\n                <Card variant=\"outlined\">\r\n                    <CardContent className={classes.colorCard}>\r\n                        <div align=\"center\">\r\n                            <img\r\n                                align=\"center\"\r\n                                alt=\"imagen crear album\"\r\n                                src=\"/music.png\"\r\n                            />\r\n                        </div>\r\n                        <Box\r\n                            display=\"flex\"\r\n                            justifyContent=\"center\"\r\n                            p={1}\r\n                            flexGrow={1}\r\n                            bgcolor=\"#F7F7EF\"\r\n                        >\r\n                            <Form>\r\n                                <FormGroup>\r\n                                  <Box display=\"flex\" justifyContent=\"center\" p={1} flexGrow={1} bgcolor=\"#F7F7EF\">\r\n                                    <input class=\"form-group\" type=\"file\" name=\"UploadAudio\" accept=\"image/png, image/jpeg\" onChange={handleFileInput} />\r\n                                  </Box>\r\n                                    <Box>\r\n                                        <TextField\r\n                                        label=\"Nombre del album\"\r\n                                        onChange={handleChange(\"nombre\")}\r\n                                        required\r\n                                        id=\"outlined-required\"\r\n                                        className={clsx(classes.margin, classes.textField)}\r\n                                        value={valuesAlbum.nombre}\r\n                                        variant=\"outlined\"\r\n                                        />\r\n                                    </Box>\r\n                                    <div style={{\r\n                                      display: \"flex\",\r\n                                      justifyContent: \"center\",\r\n                                      alignItems: \"center\",\r\n                                    }}>\r\n                                      <List className={classes.root2}>\r\n                                      {canciones.map((value,index) => {\r\n                                        const labelId = `checkbox-list-label-${value}`;\r\n\r\n                                        return (\r\n                                          <ListItem values={value} key={index} role={undefined} dense button onClick={handleToggle(value)}>\r\n                                            <ListItemIcon>\r\n                                              <Checkbox\r\n                                                edge=\"start\"\r\n                                                checked={checked.indexOf(value) !== -1}\r\n                                                tabIndex={-1}\r\n                                                disableRipple\r\n                                                inputProps={{ 'aria-labelledby': labelId }}\r\n                                              />\r\n                                            </ListItemIcon>\r\n                                            <ListItemText id={labelId} primary={`${value.idcancion} - ${value.nombre}.${value.extension}`} />\r\n                                          </ListItem>\r\n                                        );\r\n                                      })}\r\n                                    </List>\r\n                                    </div>\r\n                                    <div className={classes.centrarContenido}>\r\n                                      <br/>\r\n                                      <Button\r\n                                        style={{ fontWeight: \"bold\" }}\r\n                                        label=\"Actualizar\"\r\n                                        onClick={updateData}    \r\n                                      />                                      \r\n                                      <Button\r\n                                        style={{ fontWeight: \"bold\" }}\r\n                                        label=\"Crear album\"\r\n                                        onClick={submitData}    \r\n                                      />\r\n                                    </div>\r\n                                </FormGroup>\r\n                            </Form>\r\n                        </Box>\r\n                    </CardContent>\r\n                </Card>\r\n            </Box>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CreateAlbum;"]},"metadata":{},"sourceType":"module"}